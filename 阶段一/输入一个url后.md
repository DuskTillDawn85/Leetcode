## 输入一个url后

1. （构建请求行）输入url后，浏览器会解析这个统一资源定位符，协议头，主机域名和ip地址，端口，目录路径，查询参数，hash值，做一个基本的筛查
2. （查询浏览器缓存）浏览器查看缓存，如果请求资源在缓存中并且新鲜，跳转到转码步骤（强缓存 与 协商缓存），否则就对 URL 进行解析，确定 Web 服务器和文件名，根据这些信息来生成 HTTP 请求。
3. （解析IP）解析IP地址，查询服务器域名 对应的 ip地址，因为 委托操作系统 发送消息时，必须提供通信对象的ip地址。
  - （1）首先查找的是浏览器的 DNS 缓存；浏览器会缓存 DNS 记录一段时间。所以浏览器会先去查自己的缓存，要是域名在缓存中有记录则使用缓存中的IP进行下一步处理。要是没有则进行下一步查找。
  - （2）查询系统缓存：如果浏览器缓存中没有，浏览器会去查找系统中记录的DNS信息。先检查域名是否在本地 hosts 里，再查系统本地缓存的其他 DNS 记录。
  - （3）查路由器缓存：如果在系统缓存里面还是没找到对应的IP，那么接着会发送一个请求到路由器上，然后路由器在自己的路由器缓存上查找记录，路由器一般也存有DNS信息。
  - （4）ISP DNS缓存（电信网，联通网和移动网）：这里通过发送DNS查询报文给 ISP 也是很有深度的，首先你要知道ISP的IP地址。 如果 DNS 服务器和我们的主机在同一个子网内，需要对 DNS 服务器进行 ARP 查询；








